# Object Tracking Home assignment

### Установка зависимостей
```
pip install -r requirements.txt
```

### Запуск сервера
Или настройте запуск файла fastapi_server.py как приведено на скриншоте ниже 
![fastapi.png](info/fastapi.png)

или командой в терминале
```
python3 -m uvicorn fastapi_server:app --reload --port 8001 
```

### Постановка задачи

Реализуйте методы tracker_soft и tracker_strong в скрипте fastapi_server.py,
придумайте, обоснуйте и реализуйте метод для оценки качества разработанных трекеров.
Сравните результаты tracker_soft и tracker_strong для 5, 10, 20 объектов и различных 
значений random_range и bb_skip_percent
(информацию о генерации данных читай в пункте "Тестирование"). Напишите отчёт. 
В отчете необходимо в свободном стиле привести описание методов tracker_soft, 
tracker_strong, метода оценки качества трекеров, привести сравнительную таблицу 
реализованных трекеров, сделать вывод.  
Бонусом можете выписать найденные баги в текущем проекте.

### Тестирование
Для тестирования можно воспользоваться скриптом create_track.py. Скрипт генерирует
информацию об объектах и их треках. Скопируйте вывод в новый скрипт track_n.py и
скорректируйте импорт в fastapi_server.py
```
from track_n import track_data, country_balls_amount
```
Что стоит менять в скрипте create_track.py:  
**tracks_amount**: количество объектов  
**random_range**: на сколько пикселей рамка объектов может ложно смещаться (эмуляция не идеальной детекции)  
**bb_skip_percent**: с какой вероятностью объект на фрейме может быть не найдет детектором


## Отчёт

### Soft Tracker

Был реализован следующий подход:

- (1) для каждого нового кадра сначала строится соответствие между сохранёнными треками и пришедшими детекциями (Венгерским алгоритмом решается задача о назначениях для матрицы значений IoU между последними bbox-ами треков и новыми детекциями);
- (2) несматченные с треками детекции (либо когда число детекций больше количества треков, либо нулевое значение IoU с оптимальным треком из предыдущего пункта) жадным образом ставятся в соответствие с ближайшим по расстоянию между центрами bbox-ов треком из оставшихся;
- (3) для оставшихся без трека детекций инициализируются новые треки.

### Strong Tracker

Отличие от Soft трекера в том, что на (1) шаге считается другая матрица расстояний: не IoU, а средневзвешенная комбинация расстояния между центрами bbox-ов и расстояния между эмбеддингами. Эмбеддинги получаем с помощью предобученной на ImageNet модели ResNet34.